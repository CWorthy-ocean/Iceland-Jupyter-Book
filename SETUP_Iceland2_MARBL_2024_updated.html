
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ROMS-TOOLS setup for Iceland3_MARBL_2024 &#8212; Iceland field-trial modeling support</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'SETUP_Iceland2_MARBL_2024_updated';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="ROMS-TOOLS setup for Iceland3_MARBL_2024" href="SETUP_Iceland3_MARBL_2024.html" />
    <link rel="prev" title="ROMS-TOOLS setup for Iceland1_MARBL_2024" href="SETUP_Iceland1_MARBL_2024-Copy1_updated.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Iceland field-trial modeling support - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Iceland field-trial modeling support - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Iceland Field-Trial Modeling
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Mean state of Hvalfjordur</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Density_overview.html">Analysis of stratification in the fjord</a></li>
<li class="toctree-l1"><a class="reference internal" href="velocity_iceland3.html">Velocity</a></li>
<li class="toctree-l1"><a class="reference internal" href="tidal_analysos.html">Tidal flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="surface_obs.html">Overview of available surface observations</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Wake and sub grid scale dilution model</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Wake_dilution_scenarios.html">Wake dilution scenarios with varying speed and discharge rate</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Dye experiments</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dyepatch_small.html">Adding 8 dyes to initial conditions</a></li>


<li class="toctree-l1"><a class="reference internal" href="dye_movie-Copy1.html">A simple movie showing dye release</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">OAE experiments</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Adding_alk_initial_file.html">Adding alkalinity to a ROMS initial file</a></li>
<li class="toctree-l1"><a class="reference internal" href="pretty_movies_ALK.html">4 IBC Alkalinity release movie</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Model-Observation comparison framework</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="CTD_comparison.html">Observation to Model Comparison: CTDs</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Dual-tracer field trial</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="surface_obs_fieldtrial.html">Overview of available surface observations</a></li>
<li class="toctree-l1"><a class="reference internal" href="find_tidal_minimum.html">Assessing tidal fluctuations in ROMS 33 m model</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/CWorthy-ocean/Iceland-Jupyter-Book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/CWorthy-ocean/Iceland-Jupyter-Book/issues/new?title=Issue%20on%20page%20%2FSETUP_Iceland2_MARBL_2024_updated.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/SETUP_Iceland2_MARBL_2024_updated.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>ROMS-TOOLS setup for Iceland3_MARBL_2024</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="roms-tools-setup-for-iceland3-marbl-2024">
<h1>ROMS-TOOLS setup for Iceland3_MARBL_2024<a class="headerlink" href="#roms-tools-setup-for-iceland3-marbl-2024" title="Link to this heading">#</a></h1>
<p>First step is to set up the outer grid using ROMS-TOOLS and save the grid file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">roms_tools</span> <span class="kn">import</span> <span class="n">Grid</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">=</span><span class="s1">&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/&#39;</span>
<span class="n">datasets</span><span class="o">=</span><span class="s1">&#39;/anvil/projects/x-ees250129/Datasets_subset/&#39;</span>
<span class="n">model_name</span><span class="o">=</span><span class="s1">&#39;Iceland2&#39;</span>
<span class="n">child_name</span><span class="o">=</span><span class="s1">&#39;Iceland3&#39;</span>
<span class="n">grid_path</span><span class="o">=</span><span class="s1">&#39;/anvil/projects/x-ees250129/x-uheede/MATLAB/setup_r2r_phys+bgc/1.Make_grid/Iceland2_grid_MAT1.nc&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#%%time</span>

<span class="c1">#grid = Grid(</span>
<span class="c1">#    nx=512,</span>
<span class="c1">#    ny=512,</span>
<span class="c1">#    size_x=102.4,</span>
<span class="c1">#    size_y=102.4,</span>
<span class="c1">#    center_lon=-22.3,</span>
<span class="c1">#    center_lat=64.39,</span>
<span class="c1">#    rot=0,</span>
<span class="c1">#    topography_source={</span>
<span class="c1">#        &quot;name&quot;: &quot;SRTM15&quot;,</span>
<span class="c1">#        &quot;path&quot;: datasets+&quot;SRTM15/SRTM15_V2.6.nc&quot;},</span>
<span class="c1">#    N=40  # number of vertical layers</span>
<span class="c1">#)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span> <span class="o">=</span> <span class="n">Grid</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="n">grid_path</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a9a160e3c78c8e807412909fae1824f1e7e533e981a07375f5ba82f583edea10.png" src="_images/a9a160e3c78c8e807412909fae1824f1e7e533e981a07375f5ba82f583edea10.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepath</span> <span class="o">=</span> <span class="n">project</span><span class="o">+</span><span class="n">model_name</span><span class="o">+</span><span class="s1">&#39;_grid.nc&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span><span class="o">.</span><span class="n">update_vertical_coordinate</span><span class="p">(</span><span class="n">N</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">theta_s</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span> <span class="n">theta_b</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">hc</span><span class="o">=</span><span class="mf">300.0</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span><span class="o">.</span><span class="n">plot_vertical_coordinate</span><span class="p">(</span><span class="n">eta</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">max_nr_layer_contours</span><span class="o">=</span><span class="mi">10</span><span class="p">,)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/d84622557c314eb5d7130d7336bf73eb0a72881f65e08d720365884b611554ac.png" src="_images/d84622557c314eb5d7130d7336bf73eb0a72881f65e08d720365884b611554ac.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span><span class="o">.</span><span class="n">plot_vertical_coordinate</span><span class="p">(</span><span class="n">eta</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">max_nr_layer_contours</span><span class="o">=</span><span class="mi">10</span><span class="p">,)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/0463c95946aa2676cd1eebd902bbc01198b577efe99499e5b5ddfd8c548a25b4.png" src="_images/0463c95946aa2676cd1eebd902bbc01198b577efe99499e5b5ddfd8c548a25b4.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grid</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-11-13 17:16:03 - INFO - Writing the following NetCDF files:
/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_grid.nc
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[PosixPath(&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_grid.nc&#39;)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tpxo_path</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">+</span><span class="s2">&quot;TPXO/TPXO10.v2/&quot;</span>
<span class="n">tpxo_dict</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">tpxo_path</span> <span class="o">+</span> <span class="s2">&quot;grid_tpxo10v2.nc&quot;</span><span class="p">,</span>
    <span class="s2">&quot;h&quot;</span><span class="p">:</span> <span class="n">tpxo_path</span> <span class="o">+</span> <span class="s2">&quot;h_tpxo10.v2.nc&quot;</span><span class="p">,</span>
    <span class="s2">&quot;u&quot;</span><span class="p">:</span> <span class="n">tpxo_path</span> <span class="o">+</span> <span class="s2">&quot;u_tpxo10.v2.nc&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Next, we set up tidal forcing:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">roms_tools</span> <span class="kn">import</span> <span class="n">TidalForcing</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model_reference_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tidal_forcing</span> <span class="o">=</span> <span class="n">TidalForcing</span><span class="p">(</span>
    <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
    <span class="n">source</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;TPXO&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">tpxo_dict</span><span class="p">},</span>
    <span class="n">ntides</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>  <span class="c1"># Number of constituents to consider &lt;= 15. Default is 10.</span>
    <span class="n">model_reference_date</span><span class="o">=</span><span class="n">model_reference_date</span><span class="p">,</span>  <span class="c1"># Model reference date. Default is January 1, 2000.</span>
    <span class="n">use_dask</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-10-28 12:53:35 - INFO - Applying 2D horizontal fill to the source data before regridding.
2025-10-28 12:53:36 - INFO - Applying 2D horizontal fill to the source data before regridding.
2025-10-28 12:53:36 - INFO - Applying 2D horizontal fill to the source data before regridding.
2025-10-28 12:53:36 - INFO - Applying 2D horizontal fill to the source data before regridding.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepath</span> <span class="o">=</span> <span class="n">project</span><span class="o">+</span><span class="n">model_name</span><span class="o">+</span><span class="s2">&quot;_tides.nc&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">time</span> tidal_forcing.save(filepath)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-10-28 12:53:37 - INFO - Writing the following NetCDF files:
/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_tides.nc
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[########################################] | 100% Completed | 2.64 sms
CPU times: user 3.87 s, sys: 1.39 s, total: 5.27 s
Wall time: 2.76 s
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[PosixPath(&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_tides.nc&#39;)]
</pre></div>
</div>
</div>
</div>
<p>For the surface forcing, we use ERA5 plus the unified BGC dataset</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">roms_tools</span> <span class="kn">import</span> <span class="n">Grid</span><span class="p">,</span> <span class="n">SurfaceForcing</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">surface_forcing_kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;grid&quot;</span><span class="p">:</span> <span class="n">grid</span><span class="p">,</span>
    <span class="s2">&quot;start_time&quot;</span><span class="p">:</span> <span class="n">start_time</span><span class="p">,</span>
    <span class="s2">&quot;end_time&quot;</span><span class="p">:</span> <span class="n">end_time</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;physics&quot;</span><span class="p">,</span>
    <span class="s2">&quot;model_reference_date&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="c1"># this is the default</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="n">surface_forcing</span> <span class="o">=</span> <span class="n">SurfaceForcing</span><span class="p">(</span>
    <span class="o">**</span><span class="n">surface_forcing_kwargs</span><span class="p">,</span>
    <span class="n">source</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;ERA5&quot;</span><span class="p">},</span>
    <span class="n">use_dask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-11-13 17:25:13 - INFO - No path specified for ERA5 source; defaulting to ARCO ERA5 dataset on Google Cloud.
2025-11-13 17:26:56 - INFO - Data will be interpolated onto the grid coarsened by factor 2. Remember to set `interp_frc = 1` in your `bulk_frc.opt` ROMS option file.
2025-11-13 17:26:57 - INFO - Applying 2D horizontal fill to the source data before regridding.
2025-11-13 17:26:59 - INFO - Applying 2D horizontal fill to the source data before regridding.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 2min 37s, sys: 8.35 s, total: 2min 45s
Wall time: 2min 48s
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">surface_forcing</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;uwnd&quot;</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[########################################] | 100% Completed | 403.61 ms
</pre></div>
</div>
<img alt="_images/904d14ced1aa8a76f8bed3b378bcdc0016ae0bfcb11a8328061924de2c4cc989.png" src="_images/904d14ced1aa8a76f8bed3b378bcdc0016ae0bfcb11a8328061924de2c4cc989.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#cesm_bgc_path = &quot;/global/cfs/projectdirs/m4746/Datasets/CESM_REGRIDDED/CESM-surface_lowres_regridded.nc&quot;</span>
<span class="n">unified_bgc_path</span> <span class="o">=</span> <span class="n">datasets</span><span class="o">+</span><span class="s2">&quot;UNIFIED/BGCdataset.nc&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%%time</span>

<span class="n">unified_bgc_surface_forcing</span> <span class="o">=</span> <span class="n">SurfaceForcing</span><span class="p">(</span>
    <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
    <span class="n">start_time</span><span class="o">=</span><span class="n">start_time</span><span class="p">,</span>
    <span class="n">end_time</span><span class="o">=</span><span class="n">end_time</span><span class="p">,</span>
    <span class="n">source</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;UNIFIED&quot;</span><span class="p">,</span> <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">unified_bgc_path</span><span class="p">,</span> <span class="s2">&quot;climatology&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;bgc&quot;</span><span class="p">,</span>
    <span class="n">use_dask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-10-28 12:56:41 - INFO - Data will be interpolated onto the grid coarsened by factor 2. Remember to set `interp_frc = 1` in your `bgc.opt` ROMS option file.
2025-10-28 12:56:41 - INFO - 2D horizontal fill is skipped because source data already contains filled values.
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>CPU times: user 138 ms, sys: 10 ms, total: 148 ms
Wall time: 290 ms
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepath</span> <span class="o">=</span> <span class="n">project</span><span class="o">+</span><span class="n">model_name</span><span class="o">+</span><span class="s2">&quot;_surface_forcing2024.nc&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">time</span> surface_forcing.save(filepath, group=True)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-11-13 17:28:04 - INFO - Writing the following NetCDF files:
/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202407.nc
/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202408.nc
/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202409.nc
/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202410.nc
/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202411.nc
/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202412.nc
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[########################################] | 100% Completed | 78.58 s
[########################################] | 100% Completed | 78.72 s
[########################################] | 100% Completed | 72.43 s
[########################################] | 100% Completed | 79.08 s
[########################################] | 100% Completed | 77.38 s
[########################################] | 100% Completed | 73.16 s
CPU times: user 13min 29s, sys: 1min 56s, total: 15min 26s
Wall time: 9min 3s
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[PosixPath(&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202407.nc&#39;),
 PosixPath(&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202408.nc&#39;),
 PosixPath(&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202409.nc&#39;),
 PosixPath(&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202410.nc&#39;),
 PosixPath(&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202411.nc&#39;),
 PosixPath(&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_surface_forcing2024_202412.nc&#39;)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepath</span> <span class="o">=</span> <span class="n">project</span><span class="o">+</span><span class="n">model_name</span><span class="o">+</span><span class="s2">&quot;_bgc_surface_forcing.nc&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">time</span> unified_bgc_surface_forcing.save(filepath)
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-10-28 13:10:05 - INFO - Writing the following NetCDF files:
/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_bgc_surface_forcing_clim.nc
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[########################################] | 100% Completed | 205.58 ms
CPU times: user 191 ms, sys: 20.4 ms, total: 212 ms
Wall time: 289 ms
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[PosixPath(&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_bgc_surface_forcing_clim.nc&#39;)]
</pre></div>
</div>
</div>
</div>
<p>Next we generate the initial file</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">roms_tools</span> <span class="kn">import</span> <span class="n">Grid</span><span class="p">,</span> <span class="n">ChildGrid</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">parent_grid</span> <span class="o">=</span> <span class="n">grid</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">child_grid_parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;nx&quot;</span><span class="p">:</span> <span class="mi">512</span><span class="p">,</span>
    <span class="s2">&quot;ny&quot;</span><span class="p">:</span> <span class="mi">512</span><span class="p">,</span>
    <span class="s2">&quot;size_x&quot;</span><span class="p">:</span> <span class="mf">102.4</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;size_y&quot;</span><span class="p">:</span> <span class="mf">102.4</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;center_lon&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">21.75</span><span class="p">,</span>
    <span class="s2">&quot;center_lat&quot;</span><span class="p">:</span> <span class="mf">64.3</span><span class="p">,</span>
    <span class="s2">&quot;rot&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;topography_source&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;SRTM15&quot;</span><span class="p">,</span>
        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">datasets</span><span class="o">+</span><span class="s2">&quot;SRTM15/SRTM15_V2.6.nc&quot;</span><span class="p">},</span>
    <span class="s2">&quot;N&quot;</span><span class="p">:</span><span class="mi">40</span>  <span class="c1"># number of vertical layers</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">child_grid</span> <span class="o">=</span> <span class="n">ChildGrid</span><span class="p">(</span>
    <span class="o">**</span><span class="n">child_grid_parameters</span><span class="p">,</span>
    <span class="n">parent_grid</span><span class="o">=</span><span class="n">parent_grid</span><span class="p">,</span>
    <span class="n">boundaries</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;south&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;east&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;north&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="s2">&quot;west&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>  <span class="c1"># this is the default</span>
    <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;prefix&quot;</span><span class="p">:</span> <span class="s2">&quot;child&quot;</span><span class="p">,</span> <span class="s2">&quot;period&quot;</span><span class="p">:</span> <span class="mf">1800.0</span><span class="p">}</span>  <span class="c1"># this is the default</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">child_grid</span><span class="o">.</span><span class="n">plot_nesting</span><span class="p">(</span><span class="n">with_dim_names</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/1cec0974a006440f38d9936171683f022bc4d72fa6b402e1d319564c28ee3ea3.png" src="_images/1cec0974a006440f38d9936171683f022bc4d72fa6b402e1d319564c28ee3ea3.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepath</span> <span class="o">=</span> <span class="n">project</span><span class="o">+</span><span class="n">child_name</span><span class="o">+</span><span class="s2">&quot;_grid.nc&quot;</span>
<span class="n">child_grid</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="n">filepath</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-10-28 13:12:43 - INFO - Writing the following NetCDF files:
/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland3_grid.nc
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[PosixPath(&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland3_grid.nc&#39;)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepath_nesting</span> <span class="o">=</span> <span class="n">project</span><span class="o">+</span><span class="n">child_name</span><span class="o">+</span><span class="s2">&quot;_edata.nc&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">child_grid</span><span class="o">.</span><span class="n">save_nesting</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="n">filepath_nesting</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-10-28 13:12:43 - INFO - Writing the following NetCDF files:
/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland3_edata.nc
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[PosixPath(&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland3_edata.nc&#39;)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">roms_tools</span> <span class="kn">import</span> <span class="n">RiverForcing</span><span class="p">,</span> <span class="n">Grid</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">riv0</span><span class="o">=</span><span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;/anvil/projects/x-ees250129/Datasets_subset/Iceland_river_dataset/Hvalfjordur_rivers_2023.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="nn">File ~/.local/lib/python3.11/site-packages/xarray/backends/file_manager.py:211,</span> in <span class="ni">CachingFileManager._acquire_with_cache_info</span><span class="nt">(self, needs_lock)</span>
<span class="g g-Whitespace">    </span><span class="mi">210</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">211</span>     <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_key</span><span class="p">]</span>
<span class="g g-Whitespace">    </span><span class="mi">212</span> <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>

<span class="nn">File ~/.local/lib/python3.11/site-packages/xarray/backends/lru_cache.py:56,</span> in <span class="ni">LRUCache.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">     </span><span class="mi">55</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lock</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">56</span>     <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
<span class="g g-Whitespace">     </span><span class="mi">57</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_cache</span><span class="o">.</span><span class="n">move_to_end</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="ne">KeyError</span>: [&lt;class &#39;netCDF4._netCDF4.Dataset&#39;&gt;, (&#39;/anvil/projects/x-ees250129/Datasets_subset/Iceland_river_dataset/Hvalfjordur_rivers_2023.nc&#39;,), &#39;r&#39;, ((&#39;clobber&#39;, True), (&#39;diskless&#39;, False), (&#39;format&#39;, &#39;NETCDF4&#39;), (&#39;persist&#39;, False)), &#39;513a2b44-f9de-4e95-8c1e-b1d02bfda93b&#39;]

<span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>

<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">11</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">riv0</span><span class="o">=</span><span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s1">&#39;/anvil/projects/x-ees250129/Datasets_subset/Iceland_river_dataset/Hvalfjordur_rivers_2023.nc&#39;</span><span class="p">)</span>

<span class="nn">File ~/.local/lib/python3.11/site-packages/xarray/backends/api.py:715,</span> in <span class="ni">open_dataset</span><span class="nt">(filename_or_obj, engine, chunks, cache, decode_cf, mask_and_scale, decode_times, decode_timedelta, use_cftime, concat_characters, decode_coords, drop_variables, create_default_indexes, inline_array, chunked_array_type, from_array_kwargs, backend_kwargs, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">703</span> <span class="n">decoders</span> <span class="o">=</span> <span class="n">_resolve_decoders_kwargs</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">704</span>     <span class="n">decode_cf</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">705</span>     <span class="n">open_backend_dataset_parameters</span><span class="o">=</span><span class="n">backend</span><span class="o">.</span><span class="n">open_dataset_parameters</span><span class="p">,</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>    <span class="mi">711</span>     <span class="n">decode_coords</span><span class="o">=</span><span class="n">decode_coords</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">712</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">714</span> <span class="n">overwrite_encoded_chunks</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;overwrite_encoded_chunks&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">715</span> <span class="n">backend_ds</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">716</span>     <span class="n">filename_or_obj</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">717</span>     <span class="n">drop_variables</span><span class="o">=</span><span class="n">drop_variables</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">718</span>     <span class="o">**</span><span class="n">decoders</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">719</span>     <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">720</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">721</span> <span class="n">ds</span> <span class="o">=</span> <span class="n">_dataset_from_backend_dataset</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">722</span>     <span class="n">backend_ds</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">723</span>     <span class="n">filename_or_obj</span><span class="p">,</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>    <span class="mi">734</span>     <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">735</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">736</span> <span class="k">return</span> <span class="n">ds</span>

<span class="nn">File ~/.local/lib/python3.11/site-packages/xarray/backends/netCDF4_.py:671,</span> in <span class="ni">NetCDF4BackendEntrypoint.open_dataset</span><span class="nt">(self, filename_or_obj, mask_and_scale, decode_times, concat_characters, decode_coords, drop_variables, use_cftime, decode_timedelta, group, mode, format, clobber, diskless, persist, auto_complex, lock, autoclose)</span>
<span class="g g-Whitespace">    </span><span class="mi">649</span> <span class="k">def</span> <span class="nf">open_dataset</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">650</span>     <span class="bp">self</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">651</span>     <span class="n">filename_or_obj</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">os</span><span class="o">.</span><span class="n">PathLike</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="n">ReadBuffer</span> <span class="o">|</span> <span class="n">AbstractDataStore</span><span class="p">,</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>    <span class="mi">668</span>     <span class="n">autoclose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">669</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dataset</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">670</span>     <span class="n">filename_or_obj</span> <span class="o">=</span> <span class="n">_normalize_path</span><span class="p">(</span><span class="n">filename_or_obj</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">671</span>     <span class="n">store</span> <span class="o">=</span> <span class="n">NetCDF4DataStore</span><span class="o">.</span><span class="n">open</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">672</span>         <span class="n">filename_or_obj</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">673</span>         <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">674</span>         <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">675</span>         <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">676</span>         <span class="n">clobber</span><span class="o">=</span><span class="n">clobber</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">677</span>         <span class="n">diskless</span><span class="o">=</span><span class="n">diskless</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">678</span>         <span class="n">persist</span><span class="o">=</span><span class="n">persist</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">679</span>         <span class="n">auto_complex</span><span class="o">=</span><span class="n">auto_complex</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">680</span>         <span class="n">lock</span><span class="o">=</span><span class="n">lock</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">681</span>         <span class="n">autoclose</span><span class="o">=</span><span class="n">autoclose</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">682</span>     <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">684</span>     <span class="n">store_entrypoint</span> <span class="o">=</span> <span class="n">StoreBackendEntrypoint</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">685</span>     <span class="k">with</span> <span class="n">close_on_error</span><span class="p">(</span><span class="n">store</span><span class="p">):</span>

<span class="nn">File ~/.local/lib/python3.11/site-packages/xarray/backends/netCDF4_.py:457,</span> in <span class="ni">NetCDF4DataStore.open</span><span class="nt">(cls, filename, mode, format, group, clobber, diskless, persist, auto_complex, lock, lock_maker, autoclose)</span>
<span class="g g-Whitespace">    </span><span class="mi">453</span>     <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;auto_complex&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">auto_complex</span>
<span class="g g-Whitespace">    </span><span class="mi">454</span> <span class="n">manager</span> <span class="o">=</span> <span class="n">CachingFileManager</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">455</span>     <span class="n">netCDF4</span><span class="o">.</span><span class="n">Dataset</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span>
<span class="g g-Whitespace">    </span><span class="mi">456</span> <span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">457</span> <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">manager</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">group</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="n">lock</span><span class="o">=</span><span class="n">lock</span><span class="p">,</span> <span class="n">autoclose</span><span class="o">=</span><span class="n">autoclose</span><span class="p">)</span>

<span class="nn">File ~/.local/lib/python3.11/site-packages/xarray/backends/netCDF4_.py:398,</span> in <span class="ni">NetCDF4DataStore.__init__</span><span class="nt">(self, manager, group, mode, lock, autoclose)</span>
<span class="g g-Whitespace">    </span><span class="mi">396</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group</span> <span class="o">=</span> <span class="n">group</span>
<span class="g g-Whitespace">    </span><span class="mi">397</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">mode</span>
<span class="ne">--&gt; </span><span class="mi">398</span> <span class="bp">self</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">data_model</span>
<span class="g g-Whitespace">    </span><span class="mi">399</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds</span><span class="o">.</span><span class="n">filepath</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">400</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_remote</span> <span class="o">=</span> <span class="n">is_remote_uri</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_filename</span><span class="p">)</span>

<span class="nn">File ~/.local/lib/python3.11/site-packages/xarray/backends/netCDF4_.py:466,</span> in <span class="ni">NetCDF4DataStore.ds</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">464</span> <span class="nd">@property</span>
<span class="g g-Whitespace">    </span><span class="mi">465</span> <span class="k">def</span> <span class="nf">ds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">466</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquire</span><span class="p">()</span>

<span class="nn">File ~/.local/lib/python3.11/site-packages/xarray/backends/netCDF4_.py:460,</span> in <span class="ni">NetCDF4DataStore._acquire</span><span class="nt">(self, needs_lock)</span>
<span class="g g-Whitespace">    </span><span class="mi">459</span> <span class="k">def</span> <span class="nf">_acquire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">needs_lock</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">460</span>     <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_manager</span><span class="o">.</span><span class="n">acquire_context</span><span class="p">(</span><span class="n">needs_lock</span><span class="p">)</span> <span class="k">as</span> <span class="n">root</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">461</span>         <span class="n">ds</span> <span class="o">=</span> <span class="n">_nc4_require_group</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_group</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">462</span>     <span class="k">return</span> <span class="n">ds</span>

<span class="nn">File ~/.conda/envs/2024.02-py311/roms-tools/lib/python3.11/contextlib.py:137,</span> in <span class="ni">_GeneratorContextManager.__enter__</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">135</span> <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwds</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span>
<span class="g g-Whitespace">    </span><span class="mi">136</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">137</span>     <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gen</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">138</span> <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">139</span>     <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;generator didn&#39;t yield&quot;</span><span class="p">)</span> <span class="kn">from</span> <span class="kc">None</span>

<span class="nn">File ~/.local/lib/python3.11/site-packages/xarray/backends/file_manager.py:199,</span> in <span class="ni">CachingFileManager.acquire_context</span><span class="nt">(self, needs_lock)</span>
<span class="g g-Whitespace">    </span><span class="mi">196</span> <span class="nd">@contextlib</span><span class="o">.</span><span class="n">contextmanager</span>
<span class="g g-Whitespace">    </span><span class="mi">197</span> <span class="k">def</span> <span class="nf">acquire_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">needs_lock</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">198</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;Context manager for acquiring a file.&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">199</span>     <span class="n">file</span><span class="p">,</span> <span class="n">cached</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_acquire_with_cache_info</span><span class="p">(</span><span class="n">needs_lock</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">200</span>     <span class="k">try</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">201</span>         <span class="k">yield</span> <span class="n">file</span>

<span class="nn">File ~/.local/lib/python3.11/site-packages/xarray/backends/file_manager.py:217,</span> in <span class="ni">CachingFileManager._acquire_with_cache_info</span><span class="nt">(self, needs_lock)</span>
<span class="g g-Whitespace">    </span><span class="mi">215</span>     <span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">216</span>     <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;mode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span>
<span class="ne">--&gt; </span><span class="mi">217</span> <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_opener</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">218</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s2">&quot;w&quot;</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">219</span>     <span class="c1"># ensure file doesn&#39;t get overridden when opened again</span>
<span class="g g-Whitespace">    </span><span class="mi">220</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span>

<span class="nn">File src/netCDF4/_netCDF4.pyx:2517,</span> in <span class="ni">netCDF4._netCDF4.Dataset.__init__</span><span class="nt">()</span>

<span class="nn">File src/netCDF4/_netCDF4.pyx:2154,</span> in <span class="ni">netCDF4._netCDF4._ensure_nc_success</span><span class="nt">()</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;/anvil/projects/x-ees250129/Datasets_subset/Iceland_river_dataset/Hvalfjordur_rivers_2023.nc&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">riv0</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="mf">202401.</span><span class="p">,</span> <span class="mf">202402.</span><span class="p">,</span> <span class="mf">202403.</span><span class="p">,</span> <span class="mf">202404.</span><span class="p">,</span> <span class="mf">202405.</span><span class="p">,</span> <span class="mf">202406.</span><span class="p">,</span> <span class="mf">202407.</span><span class="p">,</span> <span class="mf">202408.</span><span class="p">,</span>
       <span class="mf">202409.</span><span class="p">,</span> <span class="mf">202410.</span><span class="p">,</span> <span class="mf">202411.</span><span class="p">,</span> <span class="mf">202412.</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">riv0</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="s1">&#39;/anvil/projects/x-ees250129/Datasets_subset/Iceland_river_dataset/Hvalfjordur_rivers_2024.nc&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">end_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2024</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">31</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">river_forcing</span> <span class="o">=</span> <span class="n">RiverForcing</span><span class="p">(</span>
    <span class="n">grid</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span>
    <span class="n">start_time</span><span class="o">=</span><span class="n">start_time</span><span class="p">,</span>
    <span class="n">end_time</span><span class="o">=</span><span class="n">end_time</span><span class="p">,</span>
    <span class="n">model_reference_date</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="c1"># this is the default</span>
    <span class="n">include_bgc</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">source</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;DAI&quot;</span><span class="p">,</span>
    <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/anvil/projects/x-ees250129/Datasets/Iceland_river_dataset/Hvalfjordur_rivers_2024.nc&quot;</span><span class="p">,</span>
    <span class="s2">&quot;climatology&quot;</span><span class="p">:</span> <span class="kc">False</span>
<span class="p">}</span>
    
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-11-19 16:54:50 - INFO - No river indices provided. Identify all rivers within the ROMS domain and assign each of them to the nearest coastal point.
2025-11-19 16:54:51 - WARNING - No records found at or before the start_time.
2025-11-19 16:54:51 - WARNING - No records found at or after the end_time.
2025-11-19 16:54:51 - INFO - Creating 1 synthetic river(s) to handle overlapping entries.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">river_forcing</span><span class="o">.</span><span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
  border: 2px solid transparent !important;
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0) !important;
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 2MB
Dimensions:           (nriver: 15, river_time: 12, ntracers: 34, eta_rho: 514,
                       xi_rho: 514)
Coordinates:
    river_name        (nriver) object 120B &#x27;HVAL1&#x27; &#x27;HVAL2&#x27; ... &#x27;overlap_1&#x27;
  * nriver            (nriver) int64 120B 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
    abs_time          (river_time) datetime64[ns] 96B 2024-01-15 ... 2024-12-15
  * river_time        (river_time) float64 96B 8.78e+03 8.811e+03 ... 9.115e+03
    tracer_name       (ntracers) &lt;U11 1kB &#x27;temp&#x27; &#x27;salt&#x27; ... &#x27;diazP&#x27; &#x27;diazFe&#x27;
    tracer_unit       (ntracers) &lt;U15 2kB &#x27;degrees Celsius&#x27; &#x27;PSU&#x27; ... &#x27;mmol/m^3&#x27;
    tracer_long_name  (ntracers) &lt;U43 6kB &#x27;potential temperature&#x27; ... &#x27;diazot...
Dimensions without coordinates: ntracers, eta_rho, xi_rho
Data variables:
    river_volume      (river_time, nriver) float64 1kB 0.09365 0.1489 ... 1.691
    river_tracer      (river_time, ntracers, nriver) float64 49kB 17.0 ... 1....
    river_index       (eta_rho, xi_rho) float32 1MB 0.0 0.0 0.0 ... 0.0 0.0 0.0
    river_fraction    (eta_rho, xi_rho) float32 1MB 0.0 0.0 0.0 ... 0.0 0.0 0.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-11ad5dc1-9e1f-4187-8daf-d254c7081d18' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-11ad5dc1-9e1f-4187-8daf-d254c7081d18' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>nriver</span>: 15</li><li><span class='xr-has-index'>river_time</span>: 12</li><li><span>ntracers</span>: 34</li><li><span>eta_rho</span>: 514</li><li><span>xi_rho</span>: 514</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-c49dcfcf-9be2-45a8-abc7-c049a2ba6dbe' class='xr-section-summary-in' type='checkbox'  checked><label for='section-c49dcfcf-9be2-45a8-abc7-c049a2ba6dbe' class='xr-section-summary' >Coordinates: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>river_name</span></div><div class='xr-var-dims'>(nriver)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;HVAL1&#x27; &#x27;HVAL2&#x27; ... &#x27;overlap_1&#x27;</div><input id='attrs-b223ff65-d992-4c8e-9b72-85bad1738ae1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b223ff65-d992-4c8e-9b72-85bad1738ae1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-394f351a-27cf-4500-937f-6eac59391174' class='xr-var-data-in' type='checkbox'><label for='data-394f351a-27cf-4500-937f-6eac59391174' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>River name</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;HVAL1&#x27;, &#x27;HVAL2&#x27;, &#x27;HVAL3&#x27;, &#x27;HVAL4&#x27;, &#x27;HVAL5&#x27;, &#x27;HVAL6&#x27;, &#x27;HVAL7&#x27;,
       &#x27;HVAL8&#x27;, &#x27;HVAL9&#x27;, &#x27;HVAL10&#x27;, &#x27;HVAL11&#x27;, &#x27;HVAL12&#x27;, &#x27;HVAL13&#x27;, &#x27;HVAL14&#x27;,
       &#x27;overlap_1&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>nriver</span></div><div class='xr-var-dims'>(nriver)</div><div class='xr-var-dtype'>int64</div><div class='xr-var-preview xr-preview'>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15</div><input id='attrs-15a6187d-fc98-41d9-a610-99add7bf954d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-15a6187d-fc98-41d9-a610-99add7bf954d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9230fa89-13be-4237-89db-b7979b196b82' class='xr-var-data-in' type='checkbox'><label for='data-9230fa89-13be-4237-89db-b7979b196b82' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>River ID (1-based Fortran indexing)</dd></dl></div><div class='xr-var-data'><pre>array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>abs_time</span></div><div class='xr-var-dims'>(river_time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2024-01-15 ... 2024-12-15</div><input id='attrs-577dccc9-4f15-4cb0-b6b9-e1123243004d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-577dccc9-4f15-4cb0-b6b9-e1123243004d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-81e249f4-e2f2-4d2e-aa32-e7fc22f35dfa' class='xr-var-data-in' type='checkbox'><label for='data-81e249f4-e2f2-4d2e-aa32-e7fc22f35dfa' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>absolute time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2024-01-15T00:00:00.000000000&#x27;, &#x27;2024-02-15T00:00:00.000000000&#x27;,
       &#x27;2024-03-15T00:00:00.000000000&#x27;, &#x27;2024-04-15T00:00:00.000000000&#x27;,
       &#x27;2024-05-15T00:00:00.000000000&#x27;, &#x27;2024-06-15T00:00:00.000000000&#x27;,
       &#x27;2024-07-15T00:00:00.000000000&#x27;, &#x27;2024-08-15T00:00:00.000000000&#x27;,
       &#x27;2024-09-15T00:00:00.000000000&#x27;, &#x27;2024-10-15T00:00:00.000000000&#x27;,
       &#x27;2024-11-15T00:00:00.000000000&#x27;, &#x27;2024-12-15T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>river_time</span></div><div class='xr-var-dims'>(river_time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>8.78e+03 8.811e+03 ... 9.115e+03</div><input id='attrs-bf4960e5-d3bd-41c4-834e-b119e3be3fa5' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-bf4960e5-d3bd-41c4-834e-b119e3be3fa5' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5ca6f027-f9ff-4669-8e4e-3772a9d57e34' class='xr-var-data-in' type='checkbox'><label for='data-5ca6f027-f9ff-4669-8e4e-3772a9d57e34' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>relative time: days since 2000-01-01 00:00:00</dd><dt><span>units :</span></dt><dd>days</dd></dl></div><div class='xr-var-data'><pre>array([8780., 8811., 8840., 8871., 8901., 8932., 8962., 8993., 9024., 9054.,
       9085., 9115.])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>tracer_name</span></div><div class='xr-var-dims'>(ntracers)</div><div class='xr-var-dtype'>&lt;U11</div><div class='xr-var-preview xr-preview'>&#x27;temp&#x27; &#x27;salt&#x27; ... &#x27;diazP&#x27; &#x27;diazFe&#x27;</div><input id='attrs-c3f64535-d889-4c69-bfcc-bed4b7d3a0a1' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c3f64535-d889-4c69-bfcc-bed4b7d3a0a1' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c197ebc6-0282-4a5f-9507-e454f9eaeb96' class='xr-var-data-in' type='checkbox'><label for='data-c197ebc6-0282-4a5f-9507-e454f9eaeb96' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer name</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;temp&#x27;, &#x27;salt&#x27;, &#x27;PO4&#x27;, &#x27;NO3&#x27;, &#x27;SiO3&#x27;, &#x27;NH4&#x27;, &#x27;Fe&#x27;, &#x27;Lig&#x27;, &#x27;O2&#x27;,
       &#x27;DIC&#x27;, &#x27;DIC_ALT_CO2&#x27;, &#x27;ALK&#x27;, &#x27;ALK_ALT_CO2&#x27;, &#x27;DOC&#x27;, &#x27;DON&#x27;, &#x27;DOP&#x27;,
       &#x27;DOPr&#x27;, &#x27;DONr&#x27;, &#x27;DOCr&#x27;, &#x27;zooC&#x27;, &#x27;spChl&#x27;, &#x27;spC&#x27;, &#x27;spP&#x27;, &#x27;spFe&#x27;,
       &#x27;spCaCO3&#x27;, &#x27;diatChl&#x27;, &#x27;diatC&#x27;, &#x27;diatP&#x27;, &#x27;diatFe&#x27;, &#x27;diatSi&#x27;,
       &#x27;diazChl&#x27;, &#x27;diazC&#x27;, &#x27;diazP&#x27;, &#x27;diazFe&#x27;], dtype=&#x27;&lt;U11&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>tracer_unit</span></div><div class='xr-var-dims'>(ntracers)</div><div class='xr-var-dtype'>&lt;U15</div><div class='xr-var-preview xr-preview'>&#x27;degrees Celsius&#x27; ... &#x27;mmol/m^3&#x27;</div><input id='attrs-d2befe2b-0a52-40d3-9df1-a94abd335758' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d2befe2b-0a52-40d3-9df1-a94abd335758' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b5bd3669-cd8b-4e7d-8739-a9b08562db59' class='xr-var-data-in' type='checkbox'><label for='data-b5bd3669-cd8b-4e7d-8739-a9b08562db59' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer concentration unit</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;degrees Celsius&#x27;, &#x27;PSU&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;meq/m^3&#x27;, &#x27;meq/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,
       &#x27;mg/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mg/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mg/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;], dtype=&#x27;&lt;U15&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>tracer_long_name</span></div><div class='xr-var-dims'>(ntracers)</div><div class='xr-var-dtype'>&lt;U43</div><div class='xr-var-preview xr-preview'>&#x27;potential temperature&#x27; ... &#x27;dia...</div><input id='attrs-0bece234-12ed-4a10-a31d-11f78e89638b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0bece234-12ed-4a10-a31d-11f78e89638b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9eca26fc-36f2-4ad5-8041-4caab80b5767' class='xr-var-data-in' type='checkbox'><label for='data-9eca26fc-36f2-4ad5-8041-4caab80b5767' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer long name</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;potential temperature&#x27;, &#x27;salinity&#x27;,
       &#x27;dissolved inorganic phosphate&#x27;, &#x27;dissolved inorganic nitrate&#x27;,
       &#x27;dissolved inorganic silicate&#x27;, &#x27;dissolved ammonia&#x27;,
       &#x27;dissolved inorganic iron&#x27;, &#x27;iron binding ligand&#x27;,
       &#x27;dissolved oxygen&#x27;, &#x27;dissolved inorganic carbon&#x27;,
       &#x27;dissolved inorganic carbon, alternative CO2&#x27;, &#x27;alkalinity&#x27;,
       &#x27;alkalinity, alternative CO2&#x27;, &#x27;dissolved organic carbon&#x27;,
       &#x27;dissolved organic nitrogen&#x27;, &#x27;dissolved organic phosphorus&#x27;,
       &#x27;refractory dissolved organic phosphorus&#x27;,
       &#x27;refractory dissolved organic nitrogen&#x27;,
       &#x27;refractory dissolved organic carbon&#x27;, &#x27;zooplankton carbon&#x27;,
       &#x27;small phytoplankton chlorophyll&#x27;, &#x27;small phytoplankton carbon&#x27;,
       &#x27;small phytoplankton phosphorous&#x27;, &#x27;small phytoplankton iron&#x27;,
       &#x27;small phytoplankton CaCO3&#x27;, &#x27;diatom chloropyll&#x27;, &#x27;diatom carbon&#x27;,
       &#x27;diatom phosphorus&#x27;, &#x27;diatom iron&#x27;, &#x27;diatom silicate&#x27;,
       &#x27;diazotroph chloropyll&#x27;, &#x27;diazotroph carbon&#x27;,
       &#x27;diazotroph phosphorus&#x27;, &#x27;diazotroph iron&#x27;], dtype=&#x27;&lt;U43&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-195f3d9e-89d1-4ab8-89a5-74b95dd21761' class='xr-section-summary-in' type='checkbox'  checked><label for='section-195f3d9e-89d1-4ab8-89a5-74b95dd21761' class='xr-section-summary' >Data variables: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>river_volume</span></div><div class='xr-var-dims'>(river_time, nriver)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.09365 0.1489 ... 0.8453 1.691</div><input id='attrs-dff755b8-6dd1-4a38-a236-f2058b3c179b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-dff755b8-6dd1-4a38-a236-f2058b3c179b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-65dd8160-a6e5-4e6d-917b-927e18212c07' class='xr-var-data-in' type='checkbox'><label for='data-65dd8160-a6e5-4e6d-917b-927e18212c07' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>River volume flux</dd><dt><span>units :</span></dt><dd>m^3/s</dd></dl></div><div class='xr-var-data'><pre>array([[9.36458856e-02, 1.48872942e-01, 9.04443115e-02, 1.72884703e-01,
        3.57174993e-01, 8.10397044e-02, 1.29663527e+00, 2.88141184e-02,
        1.17057347e+00, 1.87291765e+00, 9.04443115e-02, 0.00000000e+00,
        0.00000000e+00, 9.04443115e-02, 1.80888623e-01],
       [9.00441185e-02, 1.43147066e-01, 8.69656876e-02, 1.66235298e-01,
        3.43437493e-01, 7.79227912e-02, 1.24676466e+00, 2.77058817e-02,
        1.12555146e+00, 1.80088234e+00, 8.69656876e-02, 0.00000000e+00,
        0.00000000e+00, 8.69656876e-02, 1.73931375e-01],
       [8.64423513e-01, 1.37421179e+00, 8.34870577e-01, 1.59585881e+00,
        3.29699993e+00, 7.48058796e-01, 1.19689407e+01, 2.65976459e-01,
        1.08052940e+01, 1.72884712e+01, 8.34870577e-01, 0.00000000e+00,
        0.00000000e+00, 8.34870577e-01, 1.66974115e+00],
       [1.98457241e+00, 3.15496111e+00, 1.91672373e+00, 3.66382599e+00,
        7.56936264e+00, 1.71741843e+00, 2.74786949e+01, 6.10637665e-01,
        2.48071537e+01, 3.96914482e+01, 1.91672373e+00, 0.00000000e+00,
        0.00000000e+00, 1.91672373e+00, 3.83344746e+00],
       [1.98457241e+00, 3.15496111e+00, 1.91672373e+00, 3.66382599e+00,
        7.56936264e+00, 1.71741843e+00, 2.74786949e+01, 6.10637665e-01,
        2.48071537e+01, 3.96914482e+01, 1.91672373e+00, 0.00000000e+00,
        0.00000000e+00, 1.91672373e+00, 3.83344746e+00],
...
       [7.20352948e-01, 1.14517653e+00, 6.95725501e-01, 1.32988238e+00,
        2.74749994e+00, 6.23382330e-01, 9.97411728e+00, 2.21647054e-01,
        9.00441170e+00, 1.44070587e+01, 6.95725501e-01, 0.00000000e+00,
        0.00000000e+00, 6.95725501e-01, 1.39145100e+00],
       [9.72476482e-01, 1.54598820e+00, 9.39229429e-01, 1.79534113e+00,
        3.70912504e+00, 8.41566205e-01, 1.34650593e+01, 2.99223542e-01,
        1.21559563e+01, 1.94495296e+01, 9.39229429e-01, 0.00000000e+00,
        0.00000000e+00, 9.39229429e-01, 1.87845886e+00],
       [8.64423513e-01, 1.37421179e+00, 8.34870577e-01, 1.59585881e+00,
        3.29699993e+00, 7.48058796e-01, 1.19689407e+01, 2.65976459e-01,
        1.08052940e+01, 1.72884712e+01, 8.34870577e-01, 0.00000000e+00,
        0.00000000e+00, 8.34870577e-01, 1.66974115e+00],
       [8.64423513e-01, 1.37421179e+00, 8.34870577e-01, 1.59585881e+00,
        3.29699993e+00, 7.48058796e-01, 1.19689407e+01, 2.65976459e-01,
        1.08052940e+01, 1.72884712e+01, 8.34870577e-01, 0.00000000e+00,
        0.00000000e+00, 8.34870577e-01, 1.66974115e+00],
       [8.75228822e-01, 1.39138937e+00, 8.45306456e-01, 1.61580706e+00,
        3.33821249e+00, 7.57409573e-01, 1.21185532e+01, 2.69301176e-01,
        1.09403601e+01, 1.75045757e+01, 8.45306456e-01, 0.00000000e+00,
        0.00000000e+00, 8.45306456e-01, 1.69061291e+00]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>river_tracer</span></div><div class='xr-var-dims'>(river_time, ntracers, nriver)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>17.0 17.0 17.0 ... 1.5e-06 1.5e-06</div><input id='attrs-c8ddc73f-ce30-4061-afbc-9f26c3744bb8' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c8ddc73f-ce30-4061-afbc-9f26c3744bb8' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-19ad1f57-fbf5-4140-aee8-3b834c15214c' class='xr-var-data-in' type='checkbox'><label for='data-19ad1f57-fbf5-4140-aee8-3b834c15214c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>River tracer data</dd></dl></div><div class='xr-var-data'><pre>array([[[1.70000000e+01, 1.70000000e+01, 1.70000000e+01, ...,
         1.70000000e+01, 1.70000000e+01, 1.70000000e+01],
        [1.00000000e+00, 1.00000000e+00, 1.00000000e+00, ...,
         1.00000000e+00, 1.00000000e+00, 1.00000000e+00],
        [2.70000005e+00, 2.70000005e+00, 2.70000005e+00, ...,
         2.70000005e+00, 2.70000005e+00, 2.70000005e+00],
        ...,
        [7.50000030e-02, 7.50000030e-02, 7.50000030e-02, ...,
         7.50000030e-02, 7.50000030e-02, 7.50000030e-02],
        [1.49999997e-02, 1.49999997e-02, 1.49999997e-02, ...,
         1.49999997e-02, 1.49999997e-02, 1.49999997e-02],
        [1.50000005e-06, 1.50000005e-06, 1.50000005e-06, ...,
         1.50000005e-06, 1.50000005e-06, 1.50000005e-06]],

       [[1.70000000e+01, 1.70000000e+01, 1.70000000e+01, ...,
         1.70000000e+01, 1.70000000e+01, 1.70000000e+01],
        [1.00000000e+00, 1.00000000e+00, 1.00000000e+00, ...,
         1.00000000e+00, 1.00000000e+00, 1.00000000e+00],
        [2.70000005e+00, 2.70000005e+00, 2.70000005e+00, ...,
         2.70000005e+00, 2.70000005e+00, 2.70000005e+00],
...
         7.50000030e-02, 7.50000030e-02, 7.50000030e-02],
        [1.49999997e-02, 1.49999997e-02, 1.49999997e-02, ...,
         1.49999997e-02, 1.49999997e-02, 1.49999997e-02],
        [1.50000005e-06, 1.50000005e-06, 1.50000005e-06, ...,
         1.50000005e-06, 1.50000005e-06, 1.50000005e-06]],

       [[1.70000000e+01, 1.70000000e+01, 1.70000000e+01, ...,
         1.70000000e+01, 1.70000000e+01, 1.70000000e+01],
        [1.00000000e+00, 1.00000000e+00, 1.00000000e+00, ...,
         1.00000000e+00, 1.00000000e+00, 1.00000000e+00],
        [2.70000005e+00, 2.70000005e+00, 2.70000005e+00, ...,
         2.70000005e+00, 2.70000005e+00, 2.70000005e+00],
        ...,
        [7.50000030e-02, 7.50000030e-02, 7.50000030e-02, ...,
         7.50000030e-02, 7.50000030e-02, 7.50000030e-02],
        [1.49999997e-02, 1.49999997e-02, 1.49999997e-02, ...,
         1.49999997e-02, 1.49999997e-02, 1.49999997e-02],
        [1.50000005e-06, 1.50000005e-06, 1.50000005e-06, ...,
         1.50000005e-06, 1.50000005e-06, 1.50000005e-06]]],
      shape=(12, 34, 15))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>river_index</span></div><div class='xr-var-dims'>(eta_rho, xi_rho)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0</div><input id='attrs-7f67c1b1-e363-4ed3-8ea2-36f790d446e0' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-7f67c1b1-e363-4ed3-8ea2-36f790d446e0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-52743417-8075-41ea-8512-9b859bce3d27' class='xr-var-data-in' type='checkbox'><label for='data-52743417-8075-41ea-8512-9b859bce3d27' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>Long_name :</span></dt><dd>Final bathymetry at rho-points</dd><dt><span>units :</span></dt><dd>none</dd><dt><span>Notes :</span></dt><dd>Topo has been modified to match the parent grid topo at the boundaries</dd><dt><span>long_name :</span></dt><dd>River ID</dd></dl></div><div class='xr-var-data'><pre>array([[0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]], shape=(514, 514), dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>river_fraction</span></div><div class='xr-var-dims'>(eta_rho, xi_rho)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0</div><input id='attrs-3b77405c-617e-425d-b517-6d4ce76c5538' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3b77405c-617e-425d-b517-6d4ce76c5538' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-54e48337-0938-4d9a-ab39-d29c43f5d0e8' class='xr-var-data-in' type='checkbox'><label for='data-54e48337-0938-4d9a-ab39-d29c43f5d0e8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>Long_name :</span></dt><dd>Final bathymetry at rho-points</dd><dt><span>units :</span></dt><dd>none</dd><dt><span>Notes :</span></dt><dd>Topo has been modified to match the parent grid topo at the boundaries</dd><dt><span>long_name :</span></dt><dd>River volume fraction</dd></dl></div><div class='xr-var-data'><pre>array([[0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]], shape=(514, 514), dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f6ac8263-8e16-4338-9a05-e618adbc8851' class='xr-section-summary-in' type='checkbox'  ><label for='section-f6ac8263-8e16-4338-9a05-e618adbc8851' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>nriver</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-f04d791a-66b8-4dad-bf32-e7325937b01b' class='xr-index-data-in' type='checkbox'/><label for='index-f04d791a-66b8-4dad-bf32-e7325937b01b' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], dtype=&#x27;int64&#x27;, name=&#x27;nriver&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>river_time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-113d8e21-bc7f-4670-b5ae-bd9d859ee861' class='xr-index-data-in' type='checkbox'/><label for='index-113d8e21-bc7f-4670-b5ae-bd9d859ee861' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([8780.0, 8811.0, 8840.0, 8871.0, 8901.0, 8932.0, 8962.0, 8993.0, 9024.0,
       9054.0, 9085.0, 9115.0],
      dtype=&#x27;float64&#x27;, name=&#x27;river_time&#x27;))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-d161de22-6f2f-4317-9d9e-bb2daa9e0161' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-d161de22-6f2f-4317-9d9e-bb2daa9e0161' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">river_forcing</span><span class="o">.</span><span class="n">plot_locations</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/3aed88116231d22e445baa93d9ddb2c1f65c61a5e4a98ccfd04c390a46ce8024.png" src="_images/3aed88116231d22e445baa93d9ddb2c1f65c61a5e4a98ccfd04c390a46ce8024.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">river_forcing</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s2">&quot;river_volume&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/d1da851cd950ac527cdf1758deae80b9d6ecd8a0cef54583225e1bae935a93f5.png" src="_images/d1da851cd950ac527cdf1758deae80b9d6ecd8a0cef54583225e1bae935a93f5.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">filepath</span> <span class="o">=</span> <span class="n">project</span><span class="o">+</span><span class="n">model_name</span><span class="o">+</span><span class="s2">&quot;_rivers.nc&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">river_forcing</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filepath</span><span class="o">=</span><span class="n">filepath</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2025-11-19 16:55:12 - INFO - Writing the following NetCDF files:
/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_rivers.nc
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[PosixPath(&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2_rivers.nc&#39;)]
</pre></div>
</div>
</div>
</div>
<p>Making some customizations to the river forcing (we have observed values of alk and DIC in the rivers and we also know the water is not going to be 17 degrees warm!). We add nutrients (observed values in fjord before spring bloom) and we add observed riverine values of Alk and DIC. These should be subject to change.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">riv</span><span class="o">=</span><span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
<span class="n">riv</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_1843075/3130065273.py:5: FutureWarning: In a future version, xarray will not decode timedelta values based on the presence of a timedelta-like units attribute by default. Instead it will rely on the presence of a timedelta64 dtype attribute, which is now xarray&#39;s default way of encoding timedelta64 values. To continue decoding timedeltas based on the presence of a timedelta-like units attribute, users will need to explicitly opt-in by passing True or CFTimedeltaCoder(decode_via_units=True) to decode_timedelta. To silence this warning, set decode_timedelta to True, False, or a &#39;CFTimedeltaCoder&#39; instance.
  riv=xr.open_dataset(filepath)
</pre></div>
</div>
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
  border: 2px solid transparent !important;
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0) !important;
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt; Size: 2MB
Dimensions:           (river_time: 12, nriver: 15, ntracers: 34, eta_rho: 514,
                       xi_rho: 514)
Coordinates:
    river_name        (nriver) object 120B &#x27;HVAL1&#x27; &#x27;HVAL2&#x27; ... &#x27;overlap_1&#x27;
  * nriver            (nriver) int32 60B 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15
    abs_time          (river_time) datetime64[ns] 96B 2024-01-15 ... 2024-12-15
  * river_time        (river_time) timedelta64[ns] 96B 8780 days ... 9115 days
    tracer_name       (ntracers) object 272B &#x27;temp&#x27; &#x27;salt&#x27; ... &#x27;diazP&#x27; &#x27;diazFe&#x27;
    tracer_unit       (ntracers) object 272B &#x27;degrees Celsius&#x27; ... &#x27;mmol/m^3&#x27;
    tracer_long_name  (ntracers) object 272B &#x27;potential temperature&#x27; ... &#x27;dia...
Dimensions without coordinates: ntracers, eta_rho, xi_rho
Data variables:
    river_volume      (river_time, nriver) float64 1kB 0.09365 0.1489 ... 1.691
    river_tracer      (river_time, ntracers, nriver) float64 49kB 17.0 ... 1....
    river_index       (eta_rho, xi_rho) float32 1MB 0.0 0.0 0.0 ... 0.0 0.0 0.0
    river_fraction    (eta_rho, xi_rho) float32 1MB 0.0 0.0 0.0 ... 0.0 0.0 0.0</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-5445f846-4246-4f99-82d8-32bfe8c4965f' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-5445f846-4246-4f99-82d8-32bfe8c4965f' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>river_time</span>: 12</li><li><span class='xr-has-index'>nriver</span>: 15</li><li><span>ntracers</span>: 34</li><li><span>eta_rho</span>: 514</li><li><span>xi_rho</span>: 514</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-fe2e8931-4fd7-486c-8122-a97b80e304f3' class='xr-section-summary-in' type='checkbox'  checked><label for='section-fe2e8931-4fd7-486c-8122-a97b80e304f3' class='xr-section-summary' >Coordinates: <span>(7)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>river_name</span></div><div class='xr-var-dims'>(nriver)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;HVAL1&#x27; &#x27;HVAL2&#x27; ... &#x27;overlap_1&#x27;</div><input id='attrs-13781bfa-dea2-40de-910e-539607bdce1c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-13781bfa-dea2-40de-910e-539607bdce1c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-00ebf1f4-923e-463c-a71e-47e96f36b0f8' class='xr-var-data-in' type='checkbox'><label for='data-00ebf1f4-923e-463c-a71e-47e96f36b0f8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>River name</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;HVAL1&#x27;, &#x27;HVAL2&#x27;, &#x27;HVAL3&#x27;, &#x27;HVAL4&#x27;, &#x27;HVAL5&#x27;, &#x27;HVAL6&#x27;, &#x27;HVAL7&#x27;,
       &#x27;HVAL8&#x27;, &#x27;HVAL9&#x27;, &#x27;HVAL10&#x27;, &#x27;HVAL11&#x27;, &#x27;HVAL12&#x27;, &#x27;HVAL13&#x27;, &#x27;HVAL14&#x27;,
       &#x27;overlap_1&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>nriver</span></div><div class='xr-var-dims'>(nriver)</div><div class='xr-var-dtype'>int32</div><div class='xr-var-preview xr-preview'>1 2 3 4 5 6 7 8 9 10 11 12 13 14 15</div><input id='attrs-0410d145-3c69-4e4c-9c6b-ce704c78cca6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0410d145-3c69-4e4c-9c6b-ce704c78cca6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1c2ef4cf-5ce6-440d-b4cb-f1a62bd2869f' class='xr-var-data-in' type='checkbox'><label for='data-1c2ef4cf-5ce6-440d-b4cb-f1a62bd2869f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>River ID (1-based Fortran indexing)</dd></dl></div><div class='xr-var-data'><pre>array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15], dtype=int32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>abs_time</span></div><div class='xr-var-dims'>(river_time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2024-01-15 ... 2024-12-15</div><input id='attrs-33071b05-ca47-45ab-af66-fe83fb44c45a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-33071b05-ca47-45ab-af66-fe83fb44c45a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-54f136aa-7d98-4ac5-aba2-66c6617dd407' class='xr-var-data-in' type='checkbox'><label for='data-54f136aa-7d98-4ac5-aba2-66c6617dd407' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>absolute time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2024-01-15T00:00:00.000000000&#x27;, &#x27;2024-02-15T00:00:00.000000000&#x27;,
       &#x27;2024-03-15T00:00:00.000000000&#x27;, &#x27;2024-04-15T00:00:00.000000000&#x27;,
       &#x27;2024-05-15T00:00:00.000000000&#x27;, &#x27;2024-06-15T00:00:00.000000000&#x27;,
       &#x27;2024-07-15T00:00:00.000000000&#x27;, &#x27;2024-08-15T00:00:00.000000000&#x27;,
       &#x27;2024-09-15T00:00:00.000000000&#x27;, &#x27;2024-10-15T00:00:00.000000000&#x27;,
       &#x27;2024-11-15T00:00:00.000000000&#x27;, &#x27;2024-12-15T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>river_time</span></div><div class='xr-var-dims'>(river_time)</div><div class='xr-var-dtype'>timedelta64[ns]</div><div class='xr-var-preview xr-preview'>8780 days 8811 days ... 9115 days</div><input id='attrs-f7068356-428d-4d65-b4f9-d1f8923fbcf4' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f7068356-428d-4d65-b4f9-d1f8923fbcf4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-548083e1-953a-42f9-96d8-e10f2f61324f' class='xr-var-data-in' type='checkbox'><label for='data-548083e1-953a-42f9-96d8-e10f2f61324f' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>relative time: days since 2000-01-01 00:00:00</dd></dl></div><div class='xr-var-data'><pre>array([758592000000000000, 761270400000000000, 763776000000000000,
       766454400000000000, 769046400000000000, 771724800000000000,
       774316800000000000, 776995200000000000, 779673600000000000,
       782265600000000000, 784944000000000000, 787536000000000000],
      dtype=&#x27;timedelta64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>tracer_name</span></div><div class='xr-var-dims'>(ntracers)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;temp&#x27; &#x27;salt&#x27; ... &#x27;diazP&#x27; &#x27;diazFe&#x27;</div><input id='attrs-84ec96b2-5fed-4ac9-bdc7-e023675231ad' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-84ec96b2-5fed-4ac9-bdc7-e023675231ad' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6ddedd2e-60b8-4b5a-93c4-3e873e92e950' class='xr-var-data-in' type='checkbox'><label for='data-6ddedd2e-60b8-4b5a-93c4-3e873e92e950' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer name</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;temp&#x27;, &#x27;salt&#x27;, &#x27;PO4&#x27;, &#x27;NO3&#x27;, &#x27;SiO3&#x27;, &#x27;NH4&#x27;, &#x27;Fe&#x27;, &#x27;Lig&#x27;, &#x27;O2&#x27;,
       &#x27;DIC&#x27;, &#x27;DIC_ALT_CO2&#x27;, &#x27;ALK&#x27;, &#x27;ALK_ALT_CO2&#x27;, &#x27;DOC&#x27;, &#x27;DON&#x27;, &#x27;DOP&#x27;,
       &#x27;DOPr&#x27;, &#x27;DONr&#x27;, &#x27;DOCr&#x27;, &#x27;zooC&#x27;, &#x27;spChl&#x27;, &#x27;spC&#x27;, &#x27;spP&#x27;, &#x27;spFe&#x27;,
       &#x27;spCaCO3&#x27;, &#x27;diatChl&#x27;, &#x27;diatC&#x27;, &#x27;diatP&#x27;, &#x27;diatFe&#x27;, &#x27;diatSi&#x27;,
       &#x27;diazChl&#x27;, &#x27;diazC&#x27;, &#x27;diazP&#x27;, &#x27;diazFe&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>tracer_unit</span></div><div class='xr-var-dims'>(ntracers)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;degrees Celsius&#x27; ... &#x27;mmol/m^3&#x27;</div><input id='attrs-4894194f-f8b8-4b29-8be1-2d428d17298f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4894194f-f8b8-4b29-8be1-2d428d17298f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9637ddcd-0a18-4fab-902c-4dedada073e6' class='xr-var-data-in' type='checkbox'><label for='data-9637ddcd-0a18-4fab-902c-4dedada073e6' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer concentration unit</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;degrees Celsius&#x27;, &#x27;PSU&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;meq/m^3&#x27;, &#x27;meq/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,
       &#x27;mg/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mg/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mg/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>tracer_long_name</span></div><div class='xr-var-dims'>(ntracers)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;potential temperature&#x27; ... &#x27;dia...</div><input id='attrs-9f7b732e-8f80-4782-86c1-03a5575b723b' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9f7b732e-8f80-4782-86c1-03a5575b723b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-282e5dbc-7810-458b-b5cb-679282d3ac10' class='xr-var-data-in' type='checkbox'><label for='data-282e5dbc-7810-458b-b5cb-679282d3ac10' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer long name</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;potential temperature&#x27;, &#x27;salinity&#x27;,
       &#x27;dissolved inorganic phosphate&#x27;, &#x27;dissolved inorganic nitrate&#x27;,
       &#x27;dissolved inorganic silicate&#x27;, &#x27;dissolved ammonia&#x27;,
       &#x27;dissolved inorganic iron&#x27;, &#x27;iron binding ligand&#x27;,
       &#x27;dissolved oxygen&#x27;, &#x27;dissolved inorganic carbon&#x27;,
       &#x27;dissolved inorganic carbon, alternative CO2&#x27;, &#x27;alkalinity&#x27;,
       &#x27;alkalinity, alternative CO2&#x27;, &#x27;dissolved organic carbon&#x27;,
       &#x27;dissolved organic nitrogen&#x27;, &#x27;dissolved organic phosphorus&#x27;,
       &#x27;refractory dissolved organic phosphorus&#x27;,
       &#x27;refractory dissolved organic nitrogen&#x27;,
       &#x27;refractory dissolved organic carbon&#x27;, &#x27;zooplankton carbon&#x27;,
       &#x27;small phytoplankton chlorophyll&#x27;, &#x27;small phytoplankton carbon&#x27;,
       &#x27;small phytoplankton phosphorous&#x27;, &#x27;small phytoplankton iron&#x27;,
       &#x27;small phytoplankton CaCO3&#x27;, &#x27;diatom chloropyll&#x27;, &#x27;diatom carbon&#x27;,
       &#x27;diatom phosphorus&#x27;, &#x27;diatom iron&#x27;, &#x27;diatom silicate&#x27;,
       &#x27;diazotroph chloropyll&#x27;, &#x27;diazotroph carbon&#x27;,
       &#x27;diazotroph phosphorus&#x27;, &#x27;diazotroph iron&#x27;], dtype=object)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-3bbe8922-a927-418b-afe0-e3b1f33b2ff0' class='xr-section-summary-in' type='checkbox'  checked><label for='section-3bbe8922-a927-418b-afe0-e3b1f33b2ff0' class='xr-section-summary' >Data variables: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>river_volume</span></div><div class='xr-var-dims'>(river_time, nriver)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.09365 0.1489 ... 0.8453 1.691</div><input id='attrs-b941e262-18e9-4ffa-a11c-706c8acc41cc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b941e262-18e9-4ffa-a11c-706c8acc41cc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-57a2ab0d-2959-4c68-8d83-0f01e9af03fa' class='xr-var-data-in' type='checkbox'><label for='data-57a2ab0d-2959-4c68-8d83-0f01e9af03fa' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>River volume flux</dd><dt><span>units :</span></dt><dd>m^3/s</dd></dl></div><div class='xr-var-data'><pre>array([[9.36458856e-02, 1.48872942e-01, 9.04443115e-02, 1.72884703e-01,
        3.57174993e-01, 8.10397044e-02, 1.29663527e+00, 2.88141184e-02,
        1.17057347e+00, 1.87291765e+00, 9.04443115e-02, 0.00000000e+00,
        0.00000000e+00, 9.04443115e-02, 1.80888623e-01],
       [9.00441185e-02, 1.43147066e-01, 8.69656876e-02, 1.66235298e-01,
        3.43437493e-01, 7.79227912e-02, 1.24676466e+00, 2.77058817e-02,
        1.12555146e+00, 1.80088234e+00, 8.69656876e-02, 0.00000000e+00,
        0.00000000e+00, 8.69656876e-02, 1.73931375e-01],
       [8.64423513e-01, 1.37421179e+00, 8.34870577e-01, 1.59585881e+00,
        3.29699993e+00, 7.48058796e-01, 1.19689407e+01, 2.65976459e-01,
        1.08052940e+01, 1.72884712e+01, 8.34870577e-01, 0.00000000e+00,
        0.00000000e+00, 8.34870577e-01, 1.66974115e+00],
       [1.98457241e+00, 3.15496111e+00, 1.91672373e+00, 3.66382599e+00,
        7.56936264e+00, 1.71741843e+00, 2.74786949e+01, 6.10637665e-01,
        2.48071537e+01, 3.96914482e+01, 1.91672373e+00, 0.00000000e+00,
        0.00000000e+00, 1.91672373e+00, 3.83344746e+00],
       [1.98457241e+00, 3.15496111e+00, 1.91672373e+00, 3.66382599e+00,
        7.56936264e+00, 1.71741843e+00, 2.74786949e+01, 6.10637665e-01,
        2.48071537e+01, 3.96914482e+01, 1.91672373e+00, 0.00000000e+00,
        0.00000000e+00, 1.91672373e+00, 3.83344746e+00],
...
       [7.20352948e-01, 1.14517653e+00, 6.95725501e-01, 1.32988238e+00,
        2.74749994e+00, 6.23382330e-01, 9.97411728e+00, 2.21647054e-01,
        9.00441170e+00, 1.44070587e+01, 6.95725501e-01, 0.00000000e+00,
        0.00000000e+00, 6.95725501e-01, 1.39145100e+00],
       [9.72476482e-01, 1.54598820e+00, 9.39229429e-01, 1.79534113e+00,
        3.70912504e+00, 8.41566205e-01, 1.34650593e+01, 2.99223542e-01,
        1.21559563e+01, 1.94495296e+01, 9.39229429e-01, 0.00000000e+00,
        0.00000000e+00, 9.39229429e-01, 1.87845886e+00],
       [8.64423513e-01, 1.37421179e+00, 8.34870577e-01, 1.59585881e+00,
        3.29699993e+00, 7.48058796e-01, 1.19689407e+01, 2.65976459e-01,
        1.08052940e+01, 1.72884712e+01, 8.34870577e-01, 0.00000000e+00,
        0.00000000e+00, 8.34870577e-01, 1.66974115e+00],
       [8.64423513e-01, 1.37421179e+00, 8.34870577e-01, 1.59585881e+00,
        3.29699993e+00, 7.48058796e-01, 1.19689407e+01, 2.65976459e-01,
        1.08052940e+01, 1.72884712e+01, 8.34870577e-01, 0.00000000e+00,
        0.00000000e+00, 8.34870577e-01, 1.66974115e+00],
       [8.75228822e-01, 1.39138937e+00, 8.45306456e-01, 1.61580706e+00,
        3.33821249e+00, 7.57409573e-01, 1.21185532e+01, 2.69301176e-01,
        1.09403601e+01, 1.75045757e+01, 8.45306456e-01, 0.00000000e+00,
        0.00000000e+00, 8.45306456e-01, 1.69061291e+00]])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>river_tracer</span></div><div class='xr-var-dims'>(river_time, ntracers, nriver)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>17.0 17.0 17.0 ... 1.5e-06 1.5e-06</div><input id='attrs-cd78c62a-66c0-46b9-aa0e-881e0e0e294d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-cd78c62a-66c0-46b9-aa0e-881e0e0e294d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ebd368a1-178b-465c-9670-1154af358c2a' class='xr-var-data-in' type='checkbox'><label for='data-ebd368a1-178b-465c-9670-1154af358c2a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>River tracer data</dd></dl></div><div class='xr-var-data'><pre>array([[[1.70000000e+01, 1.70000000e+01, 1.70000000e+01, ...,
         1.70000000e+01, 1.70000000e+01, 1.70000000e+01],
        [1.00000000e+00, 1.00000000e+00, 1.00000000e+00, ...,
         1.00000000e+00, 1.00000000e+00, 1.00000000e+00],
        [2.70000005e+00, 2.70000005e+00, 2.70000005e+00, ...,
         2.70000005e+00, 2.70000005e+00, 2.70000005e+00],
        ...,
        [7.50000030e-02, 7.50000030e-02, 7.50000030e-02, ...,
         7.50000030e-02, 7.50000030e-02, 7.50000030e-02],
        [1.49999997e-02, 1.49999997e-02, 1.49999997e-02, ...,
         1.49999997e-02, 1.49999997e-02, 1.49999997e-02],
        [1.50000005e-06, 1.50000005e-06, 1.50000005e-06, ...,
         1.50000005e-06, 1.50000005e-06, 1.50000005e-06]],

       [[1.70000000e+01, 1.70000000e+01, 1.70000000e+01, ...,
         1.70000000e+01, 1.70000000e+01, 1.70000000e+01],
        [1.00000000e+00, 1.00000000e+00, 1.00000000e+00, ...,
         1.00000000e+00, 1.00000000e+00, 1.00000000e+00],
        [2.70000005e+00, 2.70000005e+00, 2.70000005e+00, ...,
         2.70000005e+00, 2.70000005e+00, 2.70000005e+00],
...
         7.50000030e-02, 7.50000030e-02, 7.50000030e-02],
        [1.49999997e-02, 1.49999997e-02, 1.49999997e-02, ...,
         1.49999997e-02, 1.49999997e-02, 1.49999997e-02],
        [1.50000005e-06, 1.50000005e-06, 1.50000005e-06, ...,
         1.50000005e-06, 1.50000005e-06, 1.50000005e-06]],

       [[1.70000000e+01, 1.70000000e+01, 1.70000000e+01, ...,
         1.70000000e+01, 1.70000000e+01, 1.70000000e+01],
        [1.00000000e+00, 1.00000000e+00, 1.00000000e+00, ...,
         1.00000000e+00, 1.00000000e+00, 1.00000000e+00],
        [2.70000005e+00, 2.70000005e+00, 2.70000005e+00, ...,
         2.70000005e+00, 2.70000005e+00, 2.70000005e+00],
        ...,
        [7.50000030e-02, 7.50000030e-02, 7.50000030e-02, ...,
         7.50000030e-02, 7.50000030e-02, 7.50000030e-02],
        [1.49999997e-02, 1.49999997e-02, 1.49999997e-02, ...,
         1.49999997e-02, 1.49999997e-02, 1.49999997e-02],
        [1.50000005e-06, 1.50000005e-06, 1.50000005e-06, ...,
         1.50000005e-06, 1.50000005e-06, 1.50000005e-06]]],
      shape=(12, 34, 15))</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>river_index</span></div><div class='xr-var-dims'>(eta_rho, xi_rho)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0</div><input id='attrs-0ec4e8bb-1941-45f3-a819-ebb8a5bc49bd' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0ec4e8bb-1941-45f3-a819-ebb8a5bc49bd' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cd0ec778-6c77-4a22-a376-7b69e6386200' class='xr-var-data-in' type='checkbox'><label for='data-cd0ec778-6c77-4a22-a376-7b69e6386200' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>Long_name :</span></dt><dd>Final bathymetry at rho-points</dd><dt><span>units :</span></dt><dd>none</dd><dt><span>Notes :</span></dt><dd>Topo has been modified to match the parent grid topo at the boundaries</dd><dt><span>long_name :</span></dt><dd>River ID</dd></dl></div><div class='xr-var-data'><pre>array([[0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]], shape=(514, 514), dtype=float32)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>river_fraction</span></div><div class='xr-var-dims'>(eta_rho, xi_rho)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0</div><input id='attrs-da30a9f1-a31c-4602-b385-8649ed8d65ad' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-da30a9f1-a31c-4602-b385-8649ed8d65ad' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6c54d37f-5b90-4742-9cbf-ab3a5b1d82a4' class='xr-var-data-in' type='checkbox'><label for='data-6c54d37f-5b90-4742-9cbf-ab3a5b1d82a4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>Long_name :</span></dt><dd>Final bathymetry at rho-points</dd><dt><span>units :</span></dt><dd>none</dd><dt><span>Notes :</span></dt><dd>Topo has been modified to match the parent grid topo at the boundaries</dd><dt><span>long_name :</span></dt><dd>River volume fraction</dd></dl></div><div class='xr-var-data'><pre>array([[0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]], shape=(514, 514), dtype=float32)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-438a74a0-c8c0-498f-96a6-5eb718498a26' class='xr-section-summary-in' type='checkbox'  ><label for='section-438a74a0-c8c0-498f-96a6-5eb718498a26' class='xr-section-summary' >Indexes: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>nriver</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-c599eb11-40ea-4ee0-aaf5-367db1d135a2' class='xr-index-data-in' type='checkbox'/><label for='index-c599eb11-40ea-4ee0-aaf5-367db1d135a2' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(Index([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15], dtype=&#x27;int32&#x27;, name=&#x27;nriver&#x27;))</pre></div></li><li class='xr-var-item'><div class='xr-index-name'><div>river_time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-86a13867-a9c0-4731-a572-de42eeaac1ec' class='xr-index-data-in' type='checkbox'/><label for='index-86a13867-a9c0-4731-a572-de42eeaac1ec' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(TimedeltaIndex([&#x27;8780 days&#x27;, &#x27;8811 days&#x27;, &#x27;8840 days&#x27;, &#x27;8871 days&#x27;,
                &#x27;8901 days&#x27;, &#x27;8932 days&#x27;, &#x27;8962 days&#x27;, &#x27;8993 days&#x27;,
                &#x27;9024 days&#x27;, &#x27;9054 days&#x27;, &#x27;9085 days&#x27;, &#x27;9115 days&#x27;],
               dtype=&#x27;timedelta64[ns]&#x27;, name=&#x27;river_time&#x27;, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-182a575e-d171-4874-8387-129b1b518999' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-182a575e-d171-4874-8387-129b1b518999' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#riv[&#39;river_time&#39;]=pd.to_datetime([&#39;2024-01-15T00:00:00.000000000&#39;, &#39;2024-02-15T00:00:00.000000000&#39;,</span>
<span class="c1">#       &#39;2024-03-15T00:00:00.000000000&#39;, &#39;2024-04-15T00:00:00.000000000&#39;,</span>
<span class="c1">#       &#39;2024-05-15T00:00:00.000000000&#39;, &#39;2024-06-15T00:00:00.000000000&#39;,</span>
<span class="c1">#       &#39;2024-07-15T00:00:00.000000000&#39;, &#39;2024-08-15T00:00:00.000000000&#39;,</span>
<span class="c1">#       &#39;2024-09-15T00:00:00.000000000&#39;, &#39;2024-10-15T00:00:00.000000000&#39;,</span>
<span class="c1">#       &#39;2024-11-15T00:00:00.000000000&#39;, &#39;2024-12-15T00:00:00.000000000&#39;])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">riv</span><span class="p">[</span><span class="s1">&#39;river_time&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
  border: 2px solid transparent !important;
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0) !important;
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;river_time&#x27; (river_time: 12)&gt; Size: 96B
array([758592000000000000, 761270400000000000, 763776000000000000,
       766454400000000000, 769046400000000000, 771724800000000000,
       774316800000000000, 776995200000000000, 779673600000000000,
       782265600000000000, 784944000000000000, 787536000000000000],
      dtype=&#x27;timedelta64[ns]&#x27;)
Coordinates:
    abs_time    (river_time) datetime64[ns] 96B 2024-01-15 ... 2024-12-15
  * river_time  (river_time) timedelta64[ns] 96B 8780 days ... 9115 days
Attributes:
    long_name:  relative time: days since 2000-01-01 00:00:00</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'river_time'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>river_time</span>: 12</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-166ed881-4afb-4b5a-ac5d-a285fbc87998' class='xr-array-in' type='checkbox' checked><label for='section-166ed881-4afb-4b5a-ac5d-a285fbc87998' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>8780 days 8811 days 8840 days ... 9054 days 9085 days 9115 days</span></div><div class='xr-array-data'><pre>array([758592000000000000, 761270400000000000, 763776000000000000,
       766454400000000000, 769046400000000000, 771724800000000000,
       774316800000000000, 776995200000000000, 779673600000000000,
       782265600000000000, 784944000000000000, 787536000000000000],
      dtype=&#x27;timedelta64[ns]&#x27;)</pre></div></div></li><li class='xr-section-item'><input id='section-46261402-40ab-46a8-bdfa-7767ed858525' class='xr-section-summary-in' type='checkbox'  checked><label for='section-46261402-40ab-46a8-bdfa-7767ed858525' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>abs_time</span></div><div class='xr-var-dims'>(river_time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2024-01-15 ... 2024-12-15</div><input id='attrs-768ccbf8-0dc6-4cf4-ad23-d200732adfee' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-768ccbf8-0dc6-4cf4-ad23-d200732adfee' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1dce8d2a-f2a7-4988-8f7c-452429b5a443' class='xr-var-data-in' type='checkbox'><label for='data-1dce8d2a-f2a7-4988-8f7c-452429b5a443' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>absolute time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2024-01-15T00:00:00.000000000&#x27;, &#x27;2024-02-15T00:00:00.000000000&#x27;,
       &#x27;2024-03-15T00:00:00.000000000&#x27;, &#x27;2024-04-15T00:00:00.000000000&#x27;,
       &#x27;2024-05-15T00:00:00.000000000&#x27;, &#x27;2024-06-15T00:00:00.000000000&#x27;,
       &#x27;2024-07-15T00:00:00.000000000&#x27;, &#x27;2024-08-15T00:00:00.000000000&#x27;,
       &#x27;2024-09-15T00:00:00.000000000&#x27;, &#x27;2024-10-15T00:00:00.000000000&#x27;,
       &#x27;2024-11-15T00:00:00.000000000&#x27;, &#x27;2024-12-15T00:00:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>river_time</span></div><div class='xr-var-dims'>(river_time)</div><div class='xr-var-dtype'>timedelta64[ns]</div><div class='xr-var-preview xr-preview'>8780 days 8811 days ... 9115 days</div><input id='attrs-a8bd8adb-020b-469a-b351-c8d46b22203c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a8bd8adb-020b-469a-b351-c8d46b22203c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-aee362d7-4d64-4579-a39a-861b1f8a95e5' class='xr-var-data-in' type='checkbox'><label for='data-aee362d7-4d64-4579-a39a-861b1f8a95e5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>relative time: days since 2000-01-01 00:00:00</dd></dl></div><div class='xr-var-data'><pre>array([758592000000000000, 761270400000000000, 763776000000000000,
       766454400000000000, 769046400000000000, 771724800000000000,
       774316800000000000, 776995200000000000, 779673600000000000,
       782265600000000000, 784944000000000000, 787536000000000000],
      dtype=&#x27;timedelta64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-e13bf48a-7b7d-477e-9ab6-a8044499a375' class='xr-section-summary-in' type='checkbox'  ><label for='section-e13bf48a-7b7d-477e-9ab6-a8044499a375' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>river_time</div></div><div class='xr-index-preview'>PandasIndex</div><input type='checkbox' disabled/><label></label><input id='index-621d2a82-d2fb-41a3-825e-eb3ed085365e' class='xr-index-data-in' type='checkbox'/><label for='index-621d2a82-d2fb-41a3-825e-eb3ed085365e' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(TimedeltaIndex([&#x27;8780 days&#x27;, &#x27;8811 days&#x27;, &#x27;8840 days&#x27;, &#x27;8871 days&#x27;,
                &#x27;8901 days&#x27;, &#x27;8932 days&#x27;, &#x27;8962 days&#x27;, &#x27;8993 days&#x27;,
                &#x27;9024 days&#x27;, &#x27;9054 days&#x27;, &#x27;9085 days&#x27;, &#x27;9115 days&#x27;],
               dtype=&#x27;timedelta64[ns]&#x27;, name=&#x27;river_time&#x27;, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-127d0516-65a4-4178-853d-d60d86efffd0' class='xr-section-summary-in' type='checkbox'  checked><label for='section-127d0516-65a4-4178-853d-d60d86efffd0' class='xr-section-summary' >Attributes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>relative time: days since 2000-01-01 00:00:00</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">riv</span><span class="p">[</span><span class="s1">&#39;tracer_name&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base rgba(0, 0, 0, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(0, 0, 0, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, white)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, white) h s calc(l - 15))
  );
}

html[theme="dark"],
html[data-theme="dark"],
body[data-theme="dark"],
body.vscode-dark {
  --xr-font-color0: var(
    --jp-content-font-color0,
    var(--pst-color-text-base, rgba(255, 255, 255, 1))
  );
  --xr-font-color2: var(
    --jp-content-font-color2,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.54))
  );
  --xr-font-color3: var(
    --jp-content-font-color3,
    var(--pst-color-text-base, rgba(255, 255, 255, 0.38))
  );
  --xr-border-color: var(
    --jp-border-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 10))
  );
  --xr-disabled-color: var(
    --jp-layout-color3,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 40))
  );
  --xr-background-color: var(
    --jp-layout-color0,
    var(--pst-color-on-background, #111111)
  );
  --xr-background-color-row-even: var(
    --jp-layout-color1,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 5))
  );
  --xr-background-color-row-odd: var(
    --jp-layout-color2,
    hsl(from var(--pst-color-on-background, #111111) h s calc(l + 15))
  );
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 0 20px 0 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: inline-block;
  opacity: 0;
  height: 0;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
  border: 2px solid transparent !important;
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:focus + label {
  border: 2px solid var(--xr-font-color0) !important;
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: "";
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: "";
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: "(";
}

.xr-dim-list:after {
  content: ")";
}

.xr-dim-list li:not(:last-child):after {
  content: ",";
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  border-color: var(--xr-background-color-row-odd);
  margin-bottom: 0;
  padding-top: 2px;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
  border-color: var(--xr-background-color-row-even);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  border-top: 2px dotted var(--xr-background-color);
  padding-bottom: 20px !important;
  padding-top: 10px !important;
}

.xr-var-attrs-in + label,
.xr-var-data-in + label,
.xr-index-data-in + label {
  padding: 0 1px;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-data > pre,
.xr-index-data > pre,
.xr-var-data > table > tbody > tr {
  background-color: transparent !important;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}

.xr-var-attrs-in:checked + label > .xr-icon-file-text2,
.xr-var-data-in:checked + label > .xr-icon-database,
.xr-index-data-in:checked + label > .xr-icon-database {
  color: var(--xr-font-color0);
  filter: drop-shadow(1px 1px 5px var(--xr-font-color2));
  stroke-width: 0.8px;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;tracer_name&#x27; (ntracers: 34)&gt; Size: 272B
array([&#x27;temp&#x27;, &#x27;salt&#x27;, &#x27;PO4&#x27;, &#x27;NO3&#x27;, &#x27;SiO3&#x27;, &#x27;NH4&#x27;, &#x27;Fe&#x27;, &#x27;Lig&#x27;, &#x27;O2&#x27;,
       &#x27;DIC&#x27;, &#x27;DIC_ALT_CO2&#x27;, &#x27;ALK&#x27;, &#x27;ALK_ALT_CO2&#x27;, &#x27;DOC&#x27;, &#x27;DON&#x27;, &#x27;DOP&#x27;,
       &#x27;DOPr&#x27;, &#x27;DONr&#x27;, &#x27;DOCr&#x27;, &#x27;zooC&#x27;, &#x27;spChl&#x27;, &#x27;spC&#x27;, &#x27;spP&#x27;, &#x27;spFe&#x27;,
       &#x27;spCaCO3&#x27;, &#x27;diatChl&#x27;, &#x27;diatC&#x27;, &#x27;diatP&#x27;, &#x27;diatFe&#x27;, &#x27;diatSi&#x27;,
       &#x27;diazChl&#x27;, &#x27;diazC&#x27;, &#x27;diazP&#x27;, &#x27;diazFe&#x27;], dtype=object)
Coordinates:
    tracer_name       (ntracers) object 272B &#x27;temp&#x27; &#x27;salt&#x27; ... &#x27;diazP&#x27; &#x27;diazFe&#x27;
    tracer_unit       (ntracers) object 272B &#x27;degrees Celsius&#x27; ... &#x27;mmol/m^3&#x27;
    tracer_long_name  (ntracers) object 272B &#x27;potential temperature&#x27; ... &#x27;dia...
Dimensions without coordinates: ntracers
Attributes:
    long_name:  Tracer name</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'tracer_name'</div><ul class='xr-dim-list'><li><span>ntracers</span>: 34</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-cf5f6388-f3d4-4256-9d1a-a7a5beac83f7' class='xr-array-in' type='checkbox' checked><label for='section-cf5f6388-f3d4-4256-9d1a-a7a5beac83f7' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>&#x27;temp&#x27; &#x27;salt&#x27; &#x27;PO4&#x27; &#x27;NO3&#x27; ... &#x27;diazChl&#x27; &#x27;diazC&#x27; &#x27;diazP&#x27; &#x27;diazFe&#x27;</span></div><div class='xr-array-data'><pre>array([&#x27;temp&#x27;, &#x27;salt&#x27;, &#x27;PO4&#x27;, &#x27;NO3&#x27;, &#x27;SiO3&#x27;, &#x27;NH4&#x27;, &#x27;Fe&#x27;, &#x27;Lig&#x27;, &#x27;O2&#x27;,
       &#x27;DIC&#x27;, &#x27;DIC_ALT_CO2&#x27;, &#x27;ALK&#x27;, &#x27;ALK_ALT_CO2&#x27;, &#x27;DOC&#x27;, &#x27;DON&#x27;, &#x27;DOP&#x27;,
       &#x27;DOPr&#x27;, &#x27;DONr&#x27;, &#x27;DOCr&#x27;, &#x27;zooC&#x27;, &#x27;spChl&#x27;, &#x27;spC&#x27;, &#x27;spP&#x27;, &#x27;spFe&#x27;,
       &#x27;spCaCO3&#x27;, &#x27;diatChl&#x27;, &#x27;diatC&#x27;, &#x27;diatP&#x27;, &#x27;diatFe&#x27;, &#x27;diatSi&#x27;,
       &#x27;diazChl&#x27;, &#x27;diazC&#x27;, &#x27;diazP&#x27;, &#x27;diazFe&#x27;], dtype=object)</pre></div></div></li><li class='xr-section-item'><input id='section-c76815f7-4dfc-4372-aac4-0545f327c0bd' class='xr-section-summary-in' type='checkbox'  checked><label for='section-c76815f7-4dfc-4372-aac4-0545f327c0bd' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>tracer_name</span></div><div class='xr-var-dims'>(ntracers)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;temp&#x27; &#x27;salt&#x27; ... &#x27;diazP&#x27; &#x27;diazFe&#x27;</div><input id='attrs-a5f81ab7-2833-4e3e-8ee6-f8e5dccb390f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a5f81ab7-2833-4e3e-8ee6-f8e5dccb390f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9ff578b7-339e-4c17-91ea-4d0d020629ec' class='xr-var-data-in' type='checkbox'><label for='data-9ff578b7-339e-4c17-91ea-4d0d020629ec' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer name</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;temp&#x27;, &#x27;salt&#x27;, &#x27;PO4&#x27;, &#x27;NO3&#x27;, &#x27;SiO3&#x27;, &#x27;NH4&#x27;, &#x27;Fe&#x27;, &#x27;Lig&#x27;, &#x27;O2&#x27;,
       &#x27;DIC&#x27;, &#x27;DIC_ALT_CO2&#x27;, &#x27;ALK&#x27;, &#x27;ALK_ALT_CO2&#x27;, &#x27;DOC&#x27;, &#x27;DON&#x27;, &#x27;DOP&#x27;,
       &#x27;DOPr&#x27;, &#x27;DONr&#x27;, &#x27;DOCr&#x27;, &#x27;zooC&#x27;, &#x27;spChl&#x27;, &#x27;spC&#x27;, &#x27;spP&#x27;, &#x27;spFe&#x27;,
       &#x27;spCaCO3&#x27;, &#x27;diatChl&#x27;, &#x27;diatC&#x27;, &#x27;diatP&#x27;, &#x27;diatFe&#x27;, &#x27;diatSi&#x27;,
       &#x27;diazChl&#x27;, &#x27;diazC&#x27;, &#x27;diazP&#x27;, &#x27;diazFe&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>tracer_unit</span></div><div class='xr-var-dims'>(ntracers)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;degrees Celsius&#x27; ... &#x27;mmol/m^3&#x27;</div><input id='attrs-3f2527ee-139b-42f2-ba65-9a0ffc7c5c0c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-3f2527ee-139b-42f2-ba65-9a0ffc7c5c0c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-08584a79-782b-4ea7-af98-03151ae384fb' class='xr-var-data-in' type='checkbox'><label for='data-08584a79-782b-4ea7-af98-03151ae384fb' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer concentration unit</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;degrees Celsius&#x27;, &#x27;PSU&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;meq/m^3&#x27;, &#x27;meq/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;,
       &#x27;mg/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mg/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mg/m^3&#x27;,
       &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;, &#x27;mmol/m^3&#x27;], dtype=object)</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>tracer_long_name</span></div><div class='xr-var-dims'>(ntracers)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;potential temperature&#x27; ... &#x27;dia...</div><input id='attrs-4ab30f18-0ab3-455d-ad26-3b8e91517e6d' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4ab30f18-0ab3-455d-ad26-3b8e91517e6d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-33cc8283-9cf2-4eed-a521-d6119f8a7bf4' class='xr-var-data-in' type='checkbox'><label for='data-33cc8283-9cf2-4eed-a521-d6119f8a7bf4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer long name</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;potential temperature&#x27;, &#x27;salinity&#x27;,
       &#x27;dissolved inorganic phosphate&#x27;, &#x27;dissolved inorganic nitrate&#x27;,
       &#x27;dissolved inorganic silicate&#x27;, &#x27;dissolved ammonia&#x27;,
       &#x27;dissolved inorganic iron&#x27;, &#x27;iron binding ligand&#x27;,
       &#x27;dissolved oxygen&#x27;, &#x27;dissolved inorganic carbon&#x27;,
       &#x27;dissolved inorganic carbon, alternative CO2&#x27;, &#x27;alkalinity&#x27;,
       &#x27;alkalinity, alternative CO2&#x27;, &#x27;dissolved organic carbon&#x27;,
       &#x27;dissolved organic nitrogen&#x27;, &#x27;dissolved organic phosphorus&#x27;,
       &#x27;refractory dissolved organic phosphorus&#x27;,
       &#x27;refractory dissolved organic nitrogen&#x27;,
       &#x27;refractory dissolved organic carbon&#x27;, &#x27;zooplankton carbon&#x27;,
       &#x27;small phytoplankton chlorophyll&#x27;, &#x27;small phytoplankton carbon&#x27;,
       &#x27;small phytoplankton phosphorous&#x27;, &#x27;small phytoplankton iron&#x27;,
       &#x27;small phytoplankton CaCO3&#x27;, &#x27;diatom chloropyll&#x27;, &#x27;diatom carbon&#x27;,
       &#x27;diatom phosphorus&#x27;, &#x27;diatom iron&#x27;, &#x27;diatom silicate&#x27;,
       &#x27;diazotroph chloropyll&#x27;, &#x27;diazotroph carbon&#x27;,
       &#x27;diazotroph phosphorus&#x27;, &#x27;diazotroph iron&#x27;], dtype=object)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-c37d3b85-b61e-4ffd-8f21-9b2dd6c82d36' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-c37d3b85-b61e-4ffd-8f21-9b2dd6c82d36' class='xr-section-summary'  title='Expand/collapse section'>Indexes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'></ul></div></li><li class='xr-section-item'><input id='section-40e243af-189c-4274-8ac8-d4e08893790f' class='xr-section-summary-in' type='checkbox'  checked><label for='section-40e243af-189c-4274-8ac8-d4e08893790f' class='xr-section-summary' >Attributes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Tracer name</dd></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create new array</span>
<span class="n">new_tracer</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">riv</span><span class="p">[</span><span class="s1">&#39;river_tracer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="c1"># Temperature varies sinusoidally with time</span>
<span class="n">temp</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">riv</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="s1">&#39;river_time&#39;</span><span class="p">]))</span>  <span class="c1"># 12-month cycle</span>

<span class="c1"># Loop through tracers</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">tracer</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">riv</span><span class="p">[</span><span class="s1">&#39;tracer_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;temp&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>  <span class="c1"># vary with time</span>
    <span class="k">elif</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;salt&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">elif</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;PO4&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mf">0.4</span>
    <span class="k">elif</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;NO3&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="k">elif</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;SiO3&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="k">elif</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;NH4&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mf">0.4</span>
    <span class="k">elif</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;Fe&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mf">0.000197</span>
    <span class="k">elif</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;Lig&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mf">0.000465</span>    
    <span class="k">elif</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;O2&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">360</span>    
    <span class="k">elif</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;DIC&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">313</span>    
    <span class="k">elif</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;DIC_ALT_CO2&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">313</span>  
    <span class="k">elif</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;ALK&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">282</span> 
    <span class="k">elif</span> <span class="n">tracer</span> <span class="o">==</span> <span class="s1">&#39;ALK_ALT_CO2&#39;</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mi">282</span> 
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new_tracer</span><span class="p">[:,</span> <span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">riv</span><span class="p">[</span><span class="s1">&#39;river_tracer&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">riv</span><span class="p">[</span><span class="s1">&#39;river_tracer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">,</span> <span class="n">new_tracer</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_1843075/608848569.py:5: FutureWarning: The return type of `Dataset.dims` will be changed to return a set of dimension names in future, in order to be more consistent with `DataArray.dims`. To access a mapping from dimension names to lengths, please use `Dataset.sizes`.
  temp = 10 * np.sin(np.linspace(0, np.pi, riv.dims[&#39;river_time&#39;]))  # 12-month cycle
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">updated_tracer_values</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mf">0.000197</span><span class="p">,</span><span class="mf">0.000465</span><span class="p">,</span><span class="mi">360</span><span class="p">,</span><span class="mi">313</span><span class="p">,</span><span class="mi">313</span><span class="p">,</span><span class="mi">282</span><span class="p">,</span><span class="mi">282</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mf">1.18</span><span class="p">,</span><span class="mf">0.05</span><span class="p">,</span><span class="mf">0.0257</span><span class="p">,</span><span class="mf">1.35</span><span class="p">,</span><span class="mi">26</span><span class="p">,</span><span class="mf">0.260</span><span class="p">,</span><span class="mf">0.0442</span><span class="p">,</span><span class="mf">0.02</span><span class="p">,</span><span class="mf">0.000171</span><span class="p">,</span><span class="mf">0.0000004</span><span class="p">,</span><span class="mf">0.00056</span><span class="p">,</span><span class="mf">0.0143</span><span class="p">,</span><span class="mf">0.044</span><span class="p">,</span><span class="mf">0.000375</span><span class="p">,</span><span class="mf">0.0000004</span><span class="p">,</span><span class="mf">0.019</span><span class="p">,</span><span class="mf">0.0001225</span><span class="p">,</span><span class="mf">0.001</span><span class="p">,</span><span class="mf">0.00000066</span><span class="p">,</span><span class="mf">0.000000046</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x1518334a3f20&gt;]
</pre></div>
</div>
<img alt="_images/46bf7ad0bc41d443531d36c730fe067387e630c67fe884d12f4825cbe6062cf2.png" src="_images/46bf7ad0bc41d443531d36c730fe067387e630c67fe884d12f4825cbe6062cf2.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">riv</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="n">project</span><span class="o">+</span><span class="n">model_name</span><span class="o">+</span><span class="s2">&quot;_rivers_modified.nc&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

<span class="c1"># Open your modified file</span>
<span class="n">river</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">project</span><span class="o">+</span><span class="n">model_name</span><span class="o">+</span><span class="s2">&quot;_rivers_modified.nc&quot;</span><span class="p">)</span>
<span class="n">river</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="c1"># Show what tracers exist</span>
<span class="n">river</span><span class="p">[</span><span class="s1">&#39;river_tracer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">ntracers</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">nriver</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x151828d05ca0&gt;]
</pre></div>
</div>
<img alt="_images/ba5453a8fb5d7817c4836ed7b908f4f4021b62b1c56f23bf437c63a2918a0258.png" src="_images/ba5453a8fb5d7817c4836ed7b908f4f4021b62b1c56f23bf437c63a2918a0258.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">riv</span>
</pre></div>
</div>
</div>
</div>
<p>Now, we make another river forcing file with half as much volume</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">riv</span><span class="p">[</span><span class="s1">&#39;river_volume&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">riv</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">river_time</span><span class="o">=</span><span class="mi">7</span><span class="p">)[</span><span class="s1">&#39;river_volume&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">riv</span><span class="p">[</span><span class="s1">&#39;river_volume&#39;</span><span class="p">]</span><span class="o">=</span> <span class="n">riv</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">river_time</span><span class="o">=</span><span class="mi">7</span><span class="p">)[</span><span class="s1">&#39;river_volume&#39;</span><span class="p">]</span>

<span class="ne">NameError</span>: name &#39;riv&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">riv</span><span class="o">.</span><span class="n">to_netcdf</span><span class="p">(</span><span class="n">project</span><span class="o">+</span><span class="n">model_name</span><span class="o">+</span><span class="s2">&quot;_rivers_modified_HALF.nc&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

<span class="c1"># Open your modified file</span>
<span class="n">river1</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">project</span><span class="o">+</span><span class="n">model_name</span><span class="o">+</span><span class="s2">&quot;_rivers_modified.nc&quot;</span><span class="p">)</span>
<span class="n">river1</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="c1"># Show what tracers exist</span>
<span class="n">river1</span><span class="p">[</span><span class="s1">&#39;river_volume&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">nriver</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x151917206f50&gt;]
</pre></div>
</div>
<img alt="_images/b90dcb6aa2bf4cfb6a15458afca8f71fd4362c8a174d857ca75b3a174dc6d3d2.png" src="_images/b90dcb6aa2bf4cfb6a15458afca8f71fd4362c8a174d857ca75b3a174dc6d3d2.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

<span class="c1"># Open your modified file</span>
<span class="n">river2</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">project</span><span class="o">+</span><span class="n">model_name</span><span class="o">+</span><span class="s2">&quot;_rivers_modified_HALF.nc&quot;</span><span class="p">)</span>
<span class="n">river2</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
<span class="c1"># Show what tracers exist</span>
<span class="n">river2</span><span class="p">[</span><span class="s1">&#39;river_volume&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">nriver</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x151917076390&gt;]
</pre></div>
</div>
<img alt="_images/fc3a68676b58f849e9bd616172b87d901c53bf16032cfcd3e0ee8b891f41156a.png" src="_images/fc3a68676b58f849e9bd616172b87d901c53bf16032cfcd3e0ee8b891f41156a.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">+</span><span class="n">model_name</span><span class="o">+</span><span class="s2">&quot;_rivers_modified_HALF.nc</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span>  <span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">33</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
    <span class="n">project</span><span class="o">+</span><span class="n">model_name</span><span class="o">+</span><span class="s2">&quot;_rivers_modified_HALF.nc</span>
                       <span class="o">^</span>
<span class="ne">SyntaxError</span>: unterminated string literal (detected at line 1)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">project</span><span class="o">+</span><span class="n">model_name</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;/anvil/projects/x-ees250129/x-uheede/INPUT_files/Iceland2_MARBL_2024/Iceland2&#39;
</pre></div>
</div>
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "roms-tools"
        },
        kernelOptions: {
            name: "roms-tools",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'roms-tools'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="SETUP_Iceland1_MARBL_2024-Copy1_updated.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">ROMS-TOOLS setup for Iceland1_MARBL_2024</p>
      </div>
    </a>
    <a class="right-next"
       href="SETUP_Iceland3_MARBL_2024.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">ROMS-TOOLS setup for Iceland3_MARBL_2024</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Ulla Heede CWorthy, LLC
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
       Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>